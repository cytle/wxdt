'use strict';!function(require,directRequire){function a(a,b){return'string'==typeof a?a.startsWith(b)?a:b+a:a}const b=require('fs'),c=require('path'),d=require('mkdir-p'),e=require('autoprefixer'),f=require('postcss'),g=require('./162bf2ee28b76d3b3d95b685cede4146.js'),h=require('./common/locales/index.js'),i=['iOS >= 8','Chrome >= 37'],{bufToUTF8:j}=require('./efc820e1b92d6e4063535296d4a24213.js'),{FILE_NOT_UTF8:k,POST_WXSS_ERR:l}=require('./949d8235c744ced2a80121e4dba34c28.js');module.exports=function(m,n={}){return new Promise(async(o,p)=>{let q=m.setting.postcss,{distPath:r}=n,s=await g(m),t=s.getAllWXSSFiles();for(let g=0,m=t.length;g<m;g++){let m=t[g],n=s.getFile(m,null),o=j(n);if(void 0===o){let a=new Error(h.config.FILE_NOT_UTF8.format(m));return a.code=k,p(a)}if(q)try{o=f([e({browsers:i,remove:!1})]).process(o,{from:a(m,'/')}).css}catch(a){let b=new Error(a.message);return b.code=l,b.parseError=a.parseError,p(b)}let u=c.join(r,m),v=c.dirname(u);d.sync(v),b.writeFileSync(u,o)}o()})}}(require('lazyload'),require);