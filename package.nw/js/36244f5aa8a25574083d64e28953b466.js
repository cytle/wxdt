'use strict';var _extends=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a};!function(require,directRequire){const a=require('lodash'),b=require('./bc78839ccca8df9e5ceeb7fae11b7be2.js'),c=require('./0634ee2ebd3e560d9d4804ecc960160f.js'),d=require('./56c390e04c10e91a4aa2a2c19d9a885d.js'),e=require('./84858de8a097c9cf84ff2c2e3d86e2a9.js'),f=require('./cc2c2970ff81ae4a83123e81ee123da2.js'),g=require('./3bfffbe88b3d923921f851c0697974fe.js'),h=require('./ba23d8b47b1f4ea08b9fd49939b9443f.js'),i=require('./d3976cc01aeebc5b09e11c4135b6bd8d.js'),j=require('./d28a711224425b00101635efe1034c99.js'),k=require('./6242f55dbdfe53c2f07b7a51568311f2.js'),l=require('./5719b6ded53098ffd9e848abcac30153.js'),m={network:{RequestDomain:[],WsRequestDomain:[],UploadDomain:[],DownloadDomain:[]},setting:_extends({},k.setting)},n=()=>{try{const a=b.getState();a.window.simulator.show||b.dispatch({type:c.WINDOW_TOGGLE_SIMULATOR}),a.window.debug.show||b.dispatch({type:c.WINDOW_TOGGLE_DEBUGGER})}catch(a){}},o=(c,d,h,k={})=>new Promise(async(n,o)=>{let p;try{let q=!1;if(!k.isTemp){const a=e.projectList,b=`${d.appid}_${d.projectname}`;for(let c in a)if(c==b){p=a[c],q=!0;break}}if(q)p.projectpath!==h&&o(l.ERROR.DUPLICATE_PROJECT_ID());else{const e=`${d.appid}_${d.projectname}`;p=_extends({},d,{isAdmin:c.is_admin,isTourist:!1,isTemp:k.isTemp,isOnline:k.isOnline,urlCheck:!0,projectid:e,hash:i.strToHash(e),appid:d.appid,projectname:d.projectname,projectpath:h,appShowImageUrl:'',libVersion:j.getVendorConfig().currentLibVersion,attr:_extends({},m,{platform:!!c.is_platform,platformNickname:c.platform_nickname||'',appNickName:''})});const l=a.merge(g.projectConfigDefault(p),p);p=l,p.compileType||(p.compileType='weapp'),k.isTemp?localStorage[`temp_${p.projectid}`]=JSON.stringify(p):b.dispatch(f.createProjectSuccess(p))}n(p)}catch(a){o(l.ERROR.GENERIC_ERROR(a.toString()))}});module.exports={getProject:o,openProject:(a,c,d,e={})=>new Promise(async(g,h)=>{try{const h=await o(a,c,d,e),i=()=>{b.dispatch(f.openProject(h.projectid)).then(()=>{setTimeout(()=>{n()},20)})};if(e.isTemp)b.dispatch(f.openTempProject(h));else{const a=b.getState();a.project&&a.project.current?(b.dispatch(f.closeProject()),setTimeout(i,50)):i()}g()}catch(a){h(a)}}),isOpened:(a,c)=>{try{const d=b.getState().project.current;return d.projectid===a&&d.projectpath===c}catch(a){return!1}},openSimulatorAndDebugger:n,compile:()=>{try{b.dispatch(h.compile({origin:d.COMPILE_ORIGIN.HTTP}))}catch(a){}}}}(require('lazyload'),require);